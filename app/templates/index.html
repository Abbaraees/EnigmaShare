{% extends 'base.html' %}
{%block content%}
<h1>Welcome {{ current_user.username }}</h1>
<div class="features-link">
    <a href="{{ url_for('main.send_message') }}">Send Message</a>
    <a href="{{ url_for('main.view_messages') }}">View Messages</a>
    <a href="{{ url_for('main.upload') }}">Upload Image</a>
    <a href="#">Settings</a>
</div>
<div>
    <h1>Messages</h1>
    {% if messages %}
        <table class="message-table">
            <thead>
                <tr>
                    <td>Title</td>
                    <td>Sender</td>
                    <td>Receiver</td>
                    <td>View Message</td>
                </tr>
            </thead>
            <tbody>
                {% for message in messages %}
                    <tr>
                        <td>{{ message.title }}</td>
                        <td>{{ message.sender.username }}</td>
                        <td>{{ message.receiver.username }}</td>
                        <td><a href="{{ url_for('main.view_message', message_id=message.id)}}">View Message</a></td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <h2>You don't have messages</h2>
    {% endif %}
</div>
{% endblock content %}